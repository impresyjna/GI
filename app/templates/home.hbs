<div class="layout-row layout-lg-column" >
  {{#paper-card as |card|}}
    {{#card.title as |title|}}
      <div id="tabs">
        {{#paper-button raised=true primary=true class='active' id='county'}}Wojew√≥dztwo{{/paper-button}}
        {{#paper-button raised=true primary=true class='not-active' id='district'}}Powiaty{{/paper-button}}
      </div>
    {{/card.title}}
    {{#card.actions}}
      <div id='map'></div>
      <div id='map2'></div>
    {{/card.actions}}
  {{/paper-card}}
</div>

<script>
  var map = L.map('map');
  $(document).ready(function(){
    adminLevel4();
    adminLevel6();
  });

  $("#county").click(function(){
    $('#district').removeClass('active');
    $('#county').removeClass('not-active');
    $('#district').addClass('not-active');
    $('#county').addClass('active');
    geojson = L.geoJson(countyBoundaries)
    changeBoundaries(geojson);
  });

  $("#district").click(function(){
    $('#county').removeClass('active');
    $('#district').removeClass('not-active');
    $('#county').addClass('not-active');
    $('#district').addClass('active');
    geojson = L.geoJson(boundaries)
    changeBoundaries(geojson);
  });

  function changeBoundaries(geojson) {
    map.eachLayer(function (layer) {
      map.removeLayer(layer);
    });

    var cartodbAttribution = '';

    var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution
    }).addTo(map);

    var positronLabels = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution,
      pane: 'labels'
    }).addTo(map);

    geojson.addTo(map);
    geojson.eachLayer(function (layer) {
      layer.bindPopup(layer.feature.properties.name);
    });



    map.setView({ lat: 53.01375, lng: 18.59814 }, 8);

  }

  function adminLevel4() {

    map.createPane('labels');
    map.invalidateSize();

    // This pane is above markers but below popups
    map.getPane('labels').style.zIndex = 650;

    // Layers in this pane are non-interactive and do not obscure mouse/touch events
    map.getPane('labels').style.pointerEvents = 'none';


    var cartodbAttribution = '';

    var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution
    }).addTo(map);

    var positronLabels = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution,
      pane: 'labels'
    }).addTo(map);

    geojson = L.geoJson(countyBoundaries).addTo(map);

    geojson.eachLayer(function (layer) {
      layer.on('click', openNewPage);
    });

    map.setView({ lat: 53.01375, lng: 18.59814 }, 8);
    map.invalidateSize();

  }

  function adminLevel6() {
    var map = L.map('map2');
    map.createPane('labels');
    map.invalidateSize();
    // This pane is above markers but below popups
    map.getPane('labels').style.zIndex = 650;

    // Layers in this pane are non-interactive and do not obscure mouse/touch events
    map.getPane('labels').style.pointerEvents = 'none';


    var cartodbAttribution = '';

    var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution
    }).addTo(map);

    var positronLabels = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png', {
      attribution: cartodbAttribution,
      pane: 'labels'
    }).addTo(map);

    geojson = L.geoJson(boundaries).addTo(map);

    geojson.eachLayer(function (layer) {
//      layer.bindPopup(layer.feature.properties.name);
      layer.on('click', openNewPage);
    });

    map.setView({ lat: 53.01375, lng: 18.59814 }, 8);
    map.invalidateSize();
  }

  function openNewPage() {
    window.open("/county","_self")
  }
</script>